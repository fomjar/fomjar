#!/usr/bin/expect -f

set host [lindex $argv 0]
set user [lindex $argv 1]
set pass [lindex $argv 2]
set srcf [lindex $argv 3]
set dstf [lindex $argv 4]

set timeout -1

spawn scp -P 2222 ${srcf} ${user}@${host}:${dstf}

expect {
    "yes"       {
        send "yes\n"
        expect "assword"
        send "${pass}\n"
    }
    "assword"   {send "${pass}\n"}
}

expect "100%"

exit

