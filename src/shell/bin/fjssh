#!/usr/bin/expect -f

set host [lindex $argv 0]
set user [lindex $argv 1]
set pass [lindex $argv 2]

set timeout -1

spawn ssh -t -t -p 2222 ${user}@${host}

expect {
    "yes"       {
        send "yes\n"
        expect "assword"
        send "${pass}\n"
    }
    "assword"   {send "${pass}\n"}
}

interact

